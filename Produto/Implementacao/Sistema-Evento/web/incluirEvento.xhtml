<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"  
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:composition template="templates/padrao.xhtml">
        <ui:define name="conteudo">

            <p:panel id="basic" header="Cadastro de Evento" style="margin-bottom:20px">                      
                <div id="formDados">
                    <h:outputLabel value="Voce nao esta logado" rendered="#{sisEventosBean.verificarSessao() eq false}"/>
                    <h:form rendered="#{sisEventosBean.verificarSessao()}">
                        <p:growl id="growl" life="4000"/>
                        <h:panelGrid columns="1">

                            <p:outputLabel for="txtTitulo" value="Título: "/>
                            <p:inputText id="txtTitulo" maxlength="60" size="50" required="true" requiredMessage="Digite o nome do Evento" value="#{sisEventosBean.evento.titulo}"/>

                            <p:outputLabel for="txtLocal" value="Local: "/>
                            <p:inputText id="txtLocal" maxlength="60" size="50" required="true" requiredMessage="Digite o Local do Evento" value="#{sisEventosBean.evento.local_evento}"/>

                            <p:outputLabel for="inicioEvento" value="Período Evento:"/>
                            <p:calendar binding="#{startDateComponent1}" requiredMessage="Selecione a data inicial" id="inicioEvento" required="true" value="#{sisEventosBean.evento.data_inicial}" locale="pt" pattern="dd/MM/yyyy"/>

                            <p:outputLabel for="fimEvento"  value="Até:"/>
                            <p:calendar id="fimEvento" binding="#{endDateComponent1}" required="true" requiredMessage="Selecione a data inicial" value="#{sisEventosBean.evento.data_final}" locale="pt"  pattern="dd/MM/yyyy">
                                <f:validator validatorId="dataEventoValidator" />
                                <f:attribute name="startDateComponent1" value="#{startDateComponent1}"/>
                            </p:calendar>   

                            <p:outputLabel for="horarioInicial" value="Horário de Início:"/>
                            <p:calendar id="horarioInicial" required="true" requiredMessage="Selecione o horário inicial" value="#{sisEventosBean.evento.horario_inicio}" locale="pt" pattern="HH:mm" timeOnly="true"/>

                            <p:outputLabel for="horarioFinal" value="Horário de Encerramento:"/>
                            <p:calendar id="horarioFinal" required="true" requiredMessage="Selecione o horário final" value="#{sisEventosBean.evento.horario_fim}" locale="pt" pattern="HH:mm" timeOnly="true"/>

                            <p:outputLabel for="categoriaEvt" value="Categoria:"/>
                            <p:selectOneMenu id="categoriaEvt" value="#{sisEventosBean.idCategoria}"  required="true" requiredMessage="Selecione uma Categoria">
                                <f:selectItems value="#{sisEventosBean.listaCategorias}"  var="cat" itemLabel="#{cat.nome}" itemValue="#{cat.id}"/>
                            </p:selectOneMenu>

                            <p:outputLabel for="areaEvento" value="Área de conhecimento:"/>
                            <p:selectOneMenu id="areaEvento" required="true" requiredMessage="Selecione uma Área" value="#{sisEventosBean.evento.area_evento}" style="width:125px">
                                <f:selectItem itemLabel="Selecione" itemValue=""/>
                                <f:selectItem itemLabel="Ciêncas Humanas" itemValue="Ciêncas Humanas"/>
                                <f:selectItem itemLabel="Ciências Exatas" itemValue="Ciências Exatas"/>
                                <f:selectItem itemLabel="Informática" itemValue="Informática"/>
                                <f:selectItem itemLabel="Outros" itemValue="Outros"/>
                            </p:selectOneMenu>

                            <h:outputLink id="track1" value="#">
                                <h:outputText value="Inscrição em Eventos"/>
                            </h:outputLink>
                            <p:tooltip id="toolTipTrack1" for="track1" value="Se deseja habilitar inscrições para seu evento" trackMouse="true"></p:tooltip>
                           
                        </h:panelGrid>
                        
                            <h:panelGroup id="painelInscricoes">
                                <p:panel id="painelInsc"   header="Inscrições" toggleable="true" closeSpeed="500" widgetVar="panel" collapsed="true" style="max-width:320px;">
                                    <p:ajax event="toggle" listener="#{sisEventosBean.aoAtivar(event)}"/>
                             
                                
                                    <h:panelGrid  columns="1">

                                        <p:outputLabel for="inicioIncricao" value="De:"/>
                                        <p:calendar id="inicioIncricao" binding="#{startDateComponent2}" value="#{sisEventosBean.evento.data_inicial_inscricao}"  locale="pt" pattern="dd/MM/yyyy"/>

                                        <p:outputLabel for="fimInscricao" value="Até:"/>
                                        <p:calendar id="fimInscricao" value="#{sisEventosBean.evento.data_final_inscricao}" locale="pt" pattern="dd/MM/yyyy">
                                            <f:validator validatorId="dataInscricaoValidator" />
                                            <f:attribute name="startDateComponent2" value="#{startDateComponent2}"/>
                                            <f:attribute name="endDateComponent1" value="#{endDateComponent1}"/>
                                        </p:calendar>

                                        <h:outputLink id="track2" value="#">
                                            <p:outputLabel  value="Limite de Inscrições:"/>
                                        </h:outputLink>
                                        <p:tooltip id="toolTipTrack2" for="track2" value="Atribui um número limite de participantes na inscrição do Evento" trackMouse="true"></p:tooltip>
                                        <p:selectBooleanCheckbox value="#{sisEventosBean.evento.limite_inscricoes}"/>                                                              

                                        <h:outputLink id="track3" value="#">
                                            <p:outputLabel for="qntidadeIncritos" value="Quantidade de Inscritos: " />
                                        </h:outputLink>
                                        <p:tooltip id="toolTipTrack3" for="track3" value="Quantidade limite de participantes na inscrição do Evento" trackMouse="true"></p:tooltip>
                                        <p:inputText id="qntidadeIncritos" maxlength="60" size="10" value="#{sisEventosBean.evento.quantidade_inscritos}"/>

                                    </h:panelGrid>
                                </p:panel>
                          
                            </h:panelGroup>

                            <h:panelGrid columns="1">
                                <h:outputLink id="track4" value="#">
                                    <p:outputLabel for="txtArea" value="Descrição do Evento: "/>
                                </h:outputLink>
                                <p:tooltip id="toolTipTrack4" for="track4" value="Descreva sobre seu Evento" trackMouse="true" ></p:tooltip>
                                <p:inputTextarea id="txtArea" maxlength="200" value="#{sisEventosBean.evento.descricao_evento}"/>

                                <p:outputLabel for="txtOrganizador" value="Organizador: "/>
                                <p:inputText id="txtOrganizador" maxlength="50" size="50" required="true" requiredMessage="Digite um nome" value="#{sisEventosBean.evento.nome_organizador}"/>

                                <p:outputLabel for="emailOrganizador" value="Email do Organizador: "/>
                                <p:inputText id="emailOrganizador" maxlength="50" size="50"  value="#{sisEventosBean.evento.email_organizador}"/>

                                <h:form enctype="multipart/form-data">
                                    <p:fileUpload fileUploadListener="#{sisEventosBean.upload}" fileLimit="1" fileLimitMessage="Excedido Limite de arquivos"
                                         cancelLabel="Cancelar" label="Arquivo" uploadLabel="Anexar" 
                                         invalidFileMessage="Somente arquivos .jpg, .png ou .gif"
                                         allowTypes="/(\.|\/)(gif|jpe?g|png)$/" value="#{sisEventosBean.file}"
                                         mode="advanced" skinSimple="true" />
                                   <p:commandButton value="Enviar" ajax="false" />
                                </h:form>
                                
                                <h:outputLink id="track5" value="#">
                                    <p:outputLabel for="submissao" value="Submissão de Arquivos:"/>
                                </h:outputLink>
                                <p:tooltip id="toolTipTrack5" for="track5" value="Habilitar submissão de arquivo dentro do periodo de Inscrições no Evento" trackMouse="true"> </p:tooltip>
                                <p:selectBooleanCheckbox id="submissao" value="#{sisEventosBean.evento.submissao}"/>                                               

                            </h:panelGrid>
                        
                            <p:toolbar>
                                <f:facet name="left"> 
                                    <p:commandButton value="Cadastrar" ajax="false" action="#{sisEventosBean.incluirEvento}" style="margin-right:20px;">
                                    </p:commandButton>
                                </f:facet>
                                <f:facet name="right">
                                    <p:button outcome="indexAdmin" value="Voltar" icon="ui-icon-star" style="margin-right:20px;"/>
                                    <p:commandButton value="Limpar" update="basic" process="@this" style="margin-right:20px;"> 
                                        <p:resetInput target="basic"/>
                                    </p:commandButton>
                                </f:facet>
                            </p:toolbar>
                    
                    </h:form>
                </div> 
            </p:panel>
        </ui:define>
    </ui:composition>
</html>